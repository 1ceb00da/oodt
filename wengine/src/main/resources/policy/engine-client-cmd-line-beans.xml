<?xml version="1.0" encoding="UTF-8"?>
<!-- 
    Copyright 2009 California Institute of Technology. ALL RIGHTS
    RESERVED. U.S. Government Sponsorship acknowledged.
    
    $Id$
    
    Author: bfoster
    Description: CAS-Catalog Command-line options
    
-->
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:p="http://www.springframework.org/schema/p"
	xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd">

	<bean class="org.apache.oodt.commons.spring.postprocessor.SetIdBeanPostProcessor"/>

	<!-- CAS-Workflow Client Cmd-Line-Options -->
	<bean id="action" lazy-init="true" class="org.apache.oodt.commons.option.CmdLineOption">
		<property name="shortOption" value="a"/>
		<property name="longOption" value="action"/>
		<property name="description" value="The Server Action to perfrom"/>
		<property name="hasArgs" value="true"/>
		<property name="optionArgName" value="bean id"/>
		<property name="required" value="true"/>
	</bean>

	<bean id="clientFactoryBeanId" lazy-init="true" class="org.apache.oodt.commons.option.CmdLineOption">
		<property name="shortOption" value="cfb"/>
		<property name="longOption" value="clientFactoryBeanId"/>
		<property name="description" value="CatalogServiceClientFactory Bean Id"/>
		<property name="hasArgs" value="true"/>
		<property name="optionArgName" value="bean id"/>
		<property name="required" value="false"/>
	</bean>

	<bean id="metadata" lazy-init="true" class="org.apache.oodt.commons.option.CmdLineOption">
		<property name="shortOption" value="m"/>
		<property name="longOption" value="metadata"/>
		<property name="description" value="Input metadata for event"/>
		<property name="hasArgs" value="true"/>
		<property name="optionArgName" value="key followed by values"/>
		<property name="type" value="java.util.List"/>
		<property name="required" value="false"/>		
		<property name="handler">
			<bean class="org.apache.oodt.commons.option.handler.CmdLineOptionBeanHandler">
				<property name="applyToBeans">
					<list>
						<bean class="org.apache.oodt.commons.option.handler.BeanInfo" p:bean-ref="TriggerEvent" p:methodName="replaceInputMetadata"/>
						<bean class="org.apache.oodt.commons.option.handler.BeanInfo" p:bean-ref="StartWorkflow" p:methodName="replaceInputMetadata"/>
						<bean class="org.apache.oodt.commons.option.handler.BeanInfo" p:bean-ref="MultiStartWorkflowByDate" p:methodName="replaceInputMetadata"/>
						<bean class="org.apache.oodt.commons.option.handler.BeanInfo" p:bean-ref="GetPage" p:methodName="replaceFilterMetadata"/>		
										
					</list>
				</property>
			</bean>
		</property>
	</bean>
	
	<bean id="eventId" lazy-init="true" class="org.apache.oodt.commons.option.CmdLineOption">
		<property name="shortOption" value="eid"/>
		<property name="longOption" value="eventId"/>
		<property name="description" value="Trigger Event ID"/>
		<property name="hasArgs" value="true"/>
		<property name="optionArgName" value="bean id"/>
		<property name="requiredOptions">
			<list>
				<bean class="org.apache.oodt.commons.option.required.RequiredOption">
					<property name="optionLongName" value="action"/>
					<property name="requireAllValues" value="false"/>
					<property name="optionValues">
						<list>
							<value>TriggerEvent</value>                        
						</list>
					</property>
				</bean>
			</list>
		</property>
		<property name="handler">
			<bean class="org.apache.oodt.commons.option.handler.CmdLineOptionBeanHandler">
				<property name="applyToBeans">
					<list>
						<bean class="org.apache.oodt.commons.option.handler.BeanInfo" p:bean-ref="TriggerEvent"/>
					</list>
				</property>
			</bean>
		</property>
	</bean>

	<bean id="state" lazy-init="true" class="org.apache.oodt.commons.option.CmdLineOption">
		<property name="shortOption" value="st"/>
		<property name="longOption" value="state"/>
		<property name="description" value="Workflow State Name"/>
		<property name="hasArgs" value="true"/>
		<property name="optionArgName" value="state name"/>
		<property name="requiredOptions">
			<list>
				<bean class="org.apache.oodt.commons.option.required.RequiredOption">
					<property name="optionLongName" value="action"/>
					<property name="requireAllValues" value="false"/>
					<property name="optionValues">
						<list>
							<value>ChangeWorkflowState</value>                        
						</list>
					</property>
				</bean>
			</list>
		</property>
		<property name="handler">
			<bean class="org.apache.oodt.commons.option.handler.CmdLineOptionBeanHandler">
				<property name="applyToBeans">
					<list>
						<bean class="org.apache.oodt.commons.option.handler.BeanInfo" p:bean-ref="GetPage"/>
						<bean class="org.apache.oodt.commons.option.handler.BeanInfo" p:bean-ref="ChangeWorkflowState"/>
						<bean class="org.apache.oodt.commons.option.handler.BeanInfo" p:bean-ref="DeleteWorkflows"/>
					</list>
				</property>
			</bean>
		</property>
	</bean>
	
	<bean id="category" lazy-init="true" class="org.apache.oodt.commons.option.CmdLineOption">
		<property name="shortOption" value="cat"/>
		<property name="longOption" value="category"/>
		<property name="description" value="Workflow State Category"/>
		<property name="hasArgs" value="true"/>
		<property name="optionArgName" value="category name"/>
		<property name="required" value="false"/>				
		<property name="handler">
			<bean class="org.apache.oodt.commons.option.handler.CmdLineOptionBeanHandler">
				<property name="applyToBeans">
					<list>
						<bean class="org.apache.oodt.commons.option.handler.BeanInfo" p:bean-ref="GetPage"/>						
						<bean class="org.apache.oodt.commons.option.handler.BeanInfo" p:bean-ref="DeleteWorkflows"/>
					</list>
				</property>
			</bean>
		</property>
	</bean>
	
	<bean id="instanceId" lazy-init="true" class="org.apache.oodt.commons.option.CmdLineOption">
		<property name="shortOption" value="iid"/>
		<property name="longOption" value="instanceId"/>
		<property name="description" value="Workflow Instance Id"/>
		<property name="hasArgs" value="true"/>
		<property name="optionArgName" value="instance id"/>
		<property name="requiredOptions">
			<list>
				<bean class="org.apache.oodt.commons.option.required.RequiredOption">
					<property name="optionLongName" value="action"/>
					<property name="requireAllValues" value="false"/>
					<property name="optionValues">
						<list>
							<value>DescribeWorkflow</value>                        
							<value>PrintWorkflow</value>                        
							<value>DeleteWorkflow</value>        
							<value>ChangeWorkflowState</value>        
							<value>ChangeWorkflowPriority</value>						
						</list>
					</property>
				</bean>
			</list>
		</property>
		<property name="handler">
			<bean class="org.apache.oodt.commons.option.handler.CmdLineOptionBeanHandler">
				<property name="applyToBeans">
					<list>
						<bean class="org.apache.oodt.commons.option.handler.BeanInfo" p:bean-ref="DescribeWorkflow"/>
						<bean class="org.apache.oodt.commons.option.handler.BeanInfo" p:bean-ref="PrintWorkflow"/>
						<bean class="org.apache.oodt.commons.option.handler.BeanInfo" p:bean-ref="DeleteWorkflow"/>
						<bean class="org.apache.oodt.commons.option.handler.BeanInfo" p:bean-ref="ChangeWorkflowState"/>
						<bean class="org.apache.oodt.commons.option.handler.BeanInfo" p:bean-ref="ChangeWorkflowPriority"/>
					</list>
				</property>
			</bean>
		</property>
	</bean>
	
	<bean id="modelId" lazy-init="true" class="org.apache.oodt.commons.option.CmdLineOption">
		<property name="shortOption" value="mid"/>
		<property name="longOption" value="modelId"/>
		<property name="description" value="Workflow Model Id"/>
		<property name="hasArgs" value="true"/>
		<property name="optionArgName" value="model id"/>
		<property name="requiredOptions">
			<list>
				<bean class="org.apache.oodt.commons.option.required.RequiredOption">
					<property name="optionLongName" value="action"/>
					<property name="requireAllValues" value="false"/>
					<property name="optionValues">
						<list>       
							<value>DescribeWorkflow</value>        
							<value>StartWorkflow</value>        
							<value>MultiStartWorkflowByDate</value>        
							<value>ChangeWorkflowState</value>
							<value>ChangeWorkflowPriority</value>						
						</list>
					</property>
				</bean>
			</list>
		</property>
		<property name="handler">
			<bean class="org.apache.oodt.commons.option.handler.CmdLineOptionBeanHandler">
				<property name="applyToBeans">
					<list>
						<bean class="org.apache.oodt.commons.option.handler.BeanInfo" p:bean-ref="GetPage"/>						
						<bean class="org.apache.oodt.commons.option.handler.BeanInfo" p:bean-ref="DescribeWorkflow"/>					
						<bean class="org.apache.oodt.commons.option.handler.BeanInfo" p:bean-ref="StartWorkflow"/>
						<bean class="org.apache.oodt.commons.option.handler.BeanInfo" p:bean-ref="MultiStartWorkflowByDate"/>
						<bean class="org.apache.oodt.commons.option.handler.BeanInfo" p:bean-ref="ChangeWorkflowState"/>
						<bean class="org.apache.oodt.commons.option.handler.BeanInfo" p:bean-ref="ChangeWorkflowPriority"/>
					</list>
				</property>
			</bean>
		</property>
	</bean>
	
	<bean id="query" lazy-init="true" class="org.apache.oodt.commons.option.CmdLineOption">
		<property name="shortOption" value="q"/>
		<property name="longOption" value="query"/>
		<property name="description" value="CAS-Catalog query"/>
		<property name="hasArgs" value="true"/>
		<property name="optionArgName" value="query"/>
		<property name="requiredOptions">
			<list>
				<bean class="org.apache.oodt.commons.option.required.RequiredOption">
					<property name="optionLongName" value="action"/>
					<property name="requireAllValues" value="false"/>
					<property name="optionValues">
						<list>
							<value>PagedQuery</value>                        
						</list>
					</property>
				</bean>
			</list>
		</property>
		<property name="handler">
			<bean class="org.apache.oodt.commons.option.handler.CmdLineOptionBeanHandler">
				<property name="applyToBeans">
					<list>
						<bean class="org.apache.oodt.commons.option.handler.BeanInfo" p:bean-ref="PagedQuery"/>
					</list>
				</property>
			</bean>
		</property>
	</bean>
	
	<bean id="pageNum" lazy-init="true" class="org.apache.oodt.commons.option.CmdLineOption">
		<property name="shortOption" value="pn"/>
		<property name="longOption" value="pageNum"/>
		<property name="description" value="Page number for query"/>
		<property name="hasArgs" value="true"/>
		<property name="optionArgName" value="integer"/>
		<property name="type" value="int"/>        		
		<property name="required" value="false"/>        		
		<property name="handler">
			<bean class="org.apache.oodt.commons.option.handler.CmdLineOptionBeanHandler">
				<property name="applyToBeans">
					<list>
						<bean class="org.apache.oodt.commons.option.handler.BeanInfo" p:bean-ref="GetPage"/>						
						<bean class="org.apache.oodt.commons.option.handler.BeanInfo" p:bean-ref="PagedQuery"/>
						<bean class="org.apache.oodt.commons.option.handler.BeanInfo" p:bean-ref="GetRunnablesPage"/>
						<bean class="org.apache.oodt.commons.option.handler.BeanInfo" p:bean-ref="GetExecutingPage"/>
					</list>
				</property>
			</bean>
		</property>
	</bean>
	
	<bean id="pageSize" lazy-init="true" class="org.apache.oodt.commons.option.CmdLineOption">
		<property name="shortOption" value="ps"/>
		<property name="longOption" value="pageSize"/>
		<property name="description" value="Page size for query"/>
		<property name="hasArgs" value="true"/>
		<property name="optionArgName" value="integer"/>
		<property name="type" value="int"/>		
		<property name="required" value="false"/>		
		<property name="handler">
			<bean class="org.apache.oodt.commons.option.handler.CmdLineOptionBeanHandler">
				<property name="applyToBeans">
					<list>
						<bean class="org.apache.oodt.commons.option.handler.BeanInfo" p:bean-ref="GetPage"/>
						<bean class="org.apache.oodt.commons.option.handler.BeanInfo" p:bean-ref="PagedQuery"/>
						<bean class="org.apache.oodt.commons.option.handler.BeanInfo" p:bean-ref="GetRunnablesPage"/>
						<bean class="org.apache.oodt.commons.option.handler.BeanInfo" p:bean-ref="GetExecutingPage"/>
						<bean class="org.apache.oodt.commons.option.handler.BeanInfo" p:bean-ref="GetStatusByState"/>
						<bean class="org.apache.oodt.commons.option.handler.BeanInfo" p:bean-ref="GetStatusByCategory"/>
					</list>
				</property>
			</bean>
		</property>
	</bean>
	
	<bean id="reducedTerms" class="org.apache.oodt.commons.option.CmdLineOption">
		<property name="shortOption" value="rt"/>
		<property name="longOption" value="reducedTerms"/>
		<property name="description" value="Term filter for query results"/>
		<property name="hasArgs" value="true"/>
		<property name="optionArgName" value="list"/>
		<property name="type" value="java.util.List"/>        
		<property name="required" value="false"/>				
		<property name="handler">
			<bean class="org.apache.oodt.commons.option.handler.CmdLineOptionBeanHandler">
				<property name="applyToBeans">
					<list>
						<bean class="org.apache.oodt.commons.option.handler.BeanInfo" p:bean-ref="PagedQuery"/>
					</list>
				</property>
			</bean>
		</property>
	</bean>
	
	<bean id="message" lazy-init="true" class="org.apache.oodt.commons.option.CmdLineOption">
		<property name="shortOption" value="m"/>
		<property name="longOption" value="message"/>
		<property name="description" value="Comment to be attached to a state"/>
		<property name="hasArgs" value="true"/>
		<property name="optionArgName" value="comment"/>
		<property name="required" value="false"/>		
		<property name="handler">
			<bean class="org.apache.oodt.commons.option.handler.CmdLineOptionBeanHandler">
				<property name="applyToBeans">
					<list>
						<bean class="org.apache.oodt.commons.option.handler.BeanInfo" p:bean-ref="ChangeWorkflowState"/>
					</list>
				</property>
			</bean>
		</property>
	</bean>
	
	<bean id="showMessage" lazy-init="true" class="org.apache.oodt.commons.option.CmdLineOption">
		<property name="shortOption" value="sm"/>
		<property name="longOption" value="showMessage"/>
		<property name="description" value="Use to turn on state message display"/>
		<property name="hasArgs" value="false"/>
		<property name="required" value="false"/>		
		<property name="handler">
			<bean class="org.apache.oodt.commons.option.handler.CmdLineOptionBeanHandler">
				<property name="applyToBeans">
					<list>
						<bean class="org.apache.oodt.commons.option.handler.BeanInfo" p:bean-ref="GetPage" p:methodName="showMessage"/>
						<bean class="org.apache.oodt.commons.option.handler.BeanInfo" p:bean-ref="GetStatusByCategory" p:methodName="showMessage"/>
						<bean class="org.apache.oodt.commons.option.handler.BeanInfo" p:bean-ref="GetStatusByState" p:methodName="showMessage"/>
					</list>
				</property>
			</bean>
		</property>
	</bean>
	
	<bean id="recur" lazy-init="true" class="org.apache.oodt.commons.option.CmdLineOption">
		<property name="shortOption" value="r"/>
		<property name="longOption" value="recur"/>
		<property name="description" value="Recursively set to all child workflows"/>
		<property name="hasArgs" value="false"/>
		<property name="required" value="false"/>		
		<property name="handler">
			<bean class="org.apache.oodt.commons.option.handler.CmdLineOptionBeanHandler">
				<property name="applyToBeans">
					<list>
						<bean class="org.apache.oodt.commons.option.handler.BeanInfo" p:bean-ref="ChangeWorkflowState"/>
					</list>
				</property>
			</bean>
		</property>
	</bean>
	
	<bean id="reverse" lazy-init="true" class="org.apache.oodt.commons.option.CmdLineOption">
		<property name="shortOption" value="rvs"/>
		<property name="longOption" value="reverse"/>
		<property name="description" value="Reverse sort order of workflows"/>
		<property name="hasArgs" value="false"/>
		<property name="required" value="false"/>		
		<property name="handler">
			<bean class="org.apache.oodt.commons.option.handler.CmdLineOptionBeanHandler">
				<property name="applyToBeans">
					<list>
						<bean class="org.apache.oodt.commons.option.handler.BeanInfo" p:bean-ref="GetPage"/>
					</list>
				</property>
			</bean>
		</property>
	</bean>
	
	<bean id="xmlModelDef" lazy-init="true" class="org.apache.oodt.commons.option.CmdLineOption">
		<property name="shortOption" value="xmd"/>
		<property name="longOption" value="xmlModelDef"/>
		<property name="description" value="XML Model Definition File"/>
		<property name="hasArgs" value="true"/>
		<property name="optionArgName" value="/path/to/file"/>
		<property name="required" value="false"/>		
		<property name="handler">
			<bean class="org.apache.oodt.commons.option.handler.CmdLineOptionBeanHandler">
				<property name="applyToBeans">
					<list>
						<bean class="org.apache.oodt.commons.option.handler.BeanInfo" p:bean-ref="StartWorkflow" p:methodName="setModelXmlDefinition"/>
						<bean class="org.apache.oodt.commons.option.handler.BeanInfo" p:bean-ref="MultiStartWorkflowByDate" p:methodName="setModelXmlDefinition"/>
					</list>
				</property>
			</bean>
		</property>
	</bean>
	
	<bean id="comparator" lazy-init="true" class="org.apache.oodt.commons.option.CmdLineOption">
		<property name="shortOption" value="cmpr"/>
		<property name="longOption" value="comparator"/>
		<property name="description" value="Comparator Name"/>
		<property name="hasArgs" value="true"/>
		<property name="optionArgName" value="CreationDate|ExecutionDate|CompletionDate|AliveTime"/>
		<property name="required" value="false"/>				
		<property name="requiredOptions">
			<list>
				<bean class="org.apache.oodt.commons.option.required.RequiredOption">
					<property name="optionLongName" value="action"/>
					<property name="requireAllValues" value="false"/>
					<property name="optionValues">
						<list>
							<value>GetPage</value>                        
						</list>
					</property>
				</bean>
			</list>
		</property>	
		<property name="handler">
			<bean class="org.apache.oodt.commons.option.handler.CmdLineOptionBeanHandler">
				<property name="applyToBeans">
					<list>
						<bean class="org.apache.oodt.commons.option.handler.BeanInfo" p:bean-ref="GetPage"/>
					</list>
				</property>
			</bean>
		</property>
	</bean>
	
	<bean id="priority" lazy-init="true" class="org.apache.oodt.commons.option.CmdLineOption">
		<property name="shortOption" value="p"/>
		<property name="longOption" value="priority"/>
		<property name="description" value="Priority Level"/>
		<property name="hasArgs" value="true"/>
		<property name="optionArgName" value="double"/>
		<property name="type" value="double"/>		
		<property name="requiredOptions">
			<list>
				<bean class="org.apache.oodt.commons.option.required.RequiredOption">
					<property name="optionLongName" value="action"/>
					<property name="requireAllValues" value="false"/>
					<property name="optionValues">
						<list>
							<value>ChangeWorkflowPriority</value>                        
						</list>
					</property>
				</bean>
			</list>
		</property>		
		<property name="handler">
			<bean class="org.apache.oodt.commons.option.handler.CmdLineOptionBeanHandler">
				<property name="applyToBeans">
					<list>
						<bean class="org.apache.oodt.commons.option.handler.BeanInfo" p:bean-ref="ChangeWorkflowPriority"/>
						<bean class="org.apache.oodt.commons.option.handler.BeanInfo" p:bean-ref="StartWorkflow"/>
						<bean class="org.apache.oodt.commons.option.handler.BeanInfo" p:bean-ref="MultiStartWorkflowByDate"/>
					</list>
				</property>
			</bean>
		</property>
	</bean>

	<bean id="url" lazy-init="true" class="org.apache.oodt.commons.option.CmdLineOption">
		<property name="shortOption" value="u"/>
		<property name="longOption" value="url"/>
		<property name="description" value="URL"/>
		<property name="hasArgs" value="true"/>
		<property name="optionArgName" value="url"/>
		<property name="required" value="false"/>				
		<property name="handler">
			<bean class="org.apache.oodt.commons.option.handler.CmdLineOptionBeanHandler">
				<property name="applyToBeans">
					<list>
						<bean class="org.apache.oodt.commons.option.handler.BeanInfo" p:bean-ref="XmlRpcClientFactory" p:methodName="setServerUrl"/>
						<bean class="org.apache.oodt.commons.option.handler.BeanInfo" p:bean-ref="RmiClientFactory" p:methodName="setServerUrl"/>
					</list>
				</property>
			</bean>
		</property>
	</bean>
	
	<bean id="startDate" lazy-init="true" class="org.apache.oodt.commons.option.CmdLineOption">
		<property name="shortOption" value="sd"/>
		<property name="longOption" value="startDate"/>
		<property name="description" value="Start of date range"/>
		<property name="hasArgs" value="true"/>
		<property name="optionArgName" value="date"/>
		<property name="requiredOptions">
			<list>
				<bean class="org.apache.oodt.commons.option.required.RequiredOption">
					<property name="optionLongName" value="action"/>
					<property name="requireAllValues" value="false"/>
					<property name="optionValues">
						<list>
							<value>MultiStartWorkflowByDate</value>                        
						</list>
					</property>
				</bean>
			</list>
		</property>		
		<property name="handler">
			<bean class="org.apache.oodt.commons.option.handler.CmdLineOptionBeanHandler">
				<property name="applyToBeans">
					<list>
						<bean class="org.apache.oodt.commons.option.handler.BeanInfo" p:bean-ref="MultiStartWorkflowByDate"/>
					</list>
				</property>
			</bean>
		</property>
	</bean>
	
	<bean id="endDate" lazy-init="true" class="org.apache.oodt.commons.option.CmdLineOption">
		<property name="shortOption" value="ed"/>
		<property name="longOption" value="endDate"/>
		<property name="description" value="End of date range"/>
		<property name="hasArgs" value="true"/>
		<property name="optionArgName" value="date"/>
		<property name="requiredOptions">
			<list>
				<bean class="org.apache.oodt.commons.option.required.RequiredOption">
					<property name="optionLongName" value="action"/>
					<property name="requireAllValues" value="false"/>
					<property name="optionValues">
						<list>
							<value>MultiStartWorkflowByDate</value>                        
						</list>
					</property>
				</bean>
			</list>
		</property>		
		<property name="handler">
			<bean class="org.apache.oodt.commons.option.handler.CmdLineOptionBeanHandler">
				<property name="applyToBeans">
					<list>
						<bean class="org.apache.oodt.commons.option.handler.BeanInfo" p:bean-ref="MultiStartWorkflowByDate"/>
					</list>
				</property>
			</bean>
		</property>
	</bean>
	
	<bean id="printSupportedActions" lazy-init="true" class="org.apache.oodt.commons.option.CmdLineOption">
        <property name="shortOption" value="psa"/>
		<property name="longOption" value="printSupportedActions"/>
        <property name="description" value="Prints a list and description of all supported WorkflowEngineServerEvents"/>
        <property name="hasArgs" value="false"/>
        <property name="required" value="false"/>
        <property name="performAndQuit" value="true"/>
        <property name="handler">
        	<bean class="org.apache.oodt.cas.workflow.server.option.PrintSupportedActionsHandler">
            	<property name="beanRepo" value="/${pcs.home}/core/workflow/policy/engine-client-config.xml"/>
            </bean>
        </property>
    </bean>
    
	<bean id="printSupportedClients" lazy-init="true" class="org.apache.oodt.commons.option.CmdLineOption">
        <property name="shortOption" value="psc"/>
        <property name="longOption" value="printSupportedClients"/>
        <property name="description" value="Prints a list and description of all supported WorkflowEngineClientFactories"/>
        <property name="hasArgs" value="false"/>
        <property name="required" value="false"/>
        <property name="performAndQuit" value="true"/>
        <property name="handler">
        	<bean class="org.apache.oodt.cas.workflow.server.option.PrintSupportedClientsHandler">
                <property name="beanRepo" value="/${pcs.home}/core/workflow/policy/engine-client-config.xml"/>
            </bean>
        </property>
    </bean>

</beans>

