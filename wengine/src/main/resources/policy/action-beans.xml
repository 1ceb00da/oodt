<?xml version="1.0" encoding="UTF-8"?>
<!-- 
	Copyright 2009 California Institute of Technology. ALL RIGHTS
	RESERVED. U.S. Government Sponsorship acknowledged.
	
	$Id$
	
	Author: bfoster
	Description: CatalogService Server Actions
	
-->
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:p="http://www.springframework.org/schema/p"
	xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd">
	
	<import resource="precondition-beans.xml"/>
	 
	<bean class="org.apache.oodt.commons.spring.postprocessor.SetIdBeanPostProcessor"/>    

	<bean id="PagedAction" abstract="true" class="org.apache.oodt.cas.workflow.server.action.TriggerEvent">
		<property name="pageNum" value="1"/>
		<property name="pageSize" value="${default.page.size}"/>		
	</bean>	

	<bean id="TriggerEvent" lazy-init="true" class="org.apache.oodt.cas.workflow.server.action.TriggerEvent">
		<property name="description" value="Triggers an event in the WorkflowManager Engine"/>
	</bean>
	<bean id="GetStatusByState" lazy-init="true" class="org.apache.oodt.cas.workflow.server.action.GetStatusByState">
		<property name="description" value="Gets an overall status of workflows by state"/>
		<property name="preConditions">
			<list>
				<ref bean="EnsureServerFullyLoaded"/>
			</list>
		</property>
	</bean>
	<bean id="GetStatusByCategory" lazy-init="true" class="org.apache.oodt.cas.workflow.server.action.GetStatusByCategory">
		<property name="description" value="Gets an overall status of workflows by category"/>
		<property name="preConditions">
			<list>
				<ref bean="EnsureServerFullyLoaded"/>
			</list>
		</property>
	</bean>
	<bean id="GetPage" parent="PagedAction" lazy-init="true" class="org.apache.oodt.cas.workflow.server.action.GetPage">
		<property name="description" value="Gets a page of workflows that match filter criteria and sort by given comparator"/>
		<property name="preConditions">
			<list>
				<ref bean="EnsureServerFullyLoaded"/>
			</list>
		</property>
	</bean>
	<bean id="GetSupportedStates" lazy-init="true" class="org.apache.oodt.cas.workflow.server.action.GetSupportedStates">
		<property name="description" value="Gets a list of states supported by the server's engine"/>
	</bean>
	<bean id="GetSupportedWorkflows" lazy-init="true" class="org.apache.oodt.cas.workflow.server.action.GetSupportedWorkflows">
		<property name="description" value="Gets a list of workflow ModelIds supported by the server's engine"/>
	</bean>
	<bean id="PrintWorkflow" lazy-init="true" class="org.apache.oodt.cas.workflow.server.action.PrintWorkflow">
		<property name="description" value="Prints out processor skeleton"/>
	</bean>
	<bean id="DescribeWorkflow" lazy-init="true" class="org.apache.oodt.cas.workflow.server.action.DescribeWorkflow">
		<property name="description" value="Prints out no-recur processor skeleton descripting info"/>
	</bean>
	<bean id="DeleteWorkflow" lazy-init="true" class="org.apache.oodt.cas.workflow.server.action.DeleteWorkflow">
		<property name="description" value="Deletes Workflow and Task Instances"/>
	</bean>
	<bean id="DeleteWorkflows" lazy-init="true" class="org.apache.oodt.cas.workflow.server.action.DeleteWorkflows">
		<property name="description" value="Deletes Workflows and Task Instances that match filter criteria"/>
	</bean>
	<bean id="GetRunnablesPage" parent="PagedAction" lazy-init="true" class="org.apache.oodt.cas.workflow.server.action.GetRunnablesPage">
		<property name="description" value="Returns a page of runnable Workflow Task Processors"/>
	</bean>
	<bean id="GetExecutingPage" parent="PagedAction" lazy-init="true" class="org.apache.oodt.cas.workflow.server.action.GetExecutingPage">
		<property name="description" value="Returns a page of executing Workflow Task Processors"/>
	</bean>
	<bean id="GetPercentLoaded" lazy-init="true" class="org.apache.oodt.cas.workflow.server.action.GetPercentLoaded">
		<property name="description" value="Returns percent of loaded Workflow Processors"/>
	</bean>
	<bean id="PagedQuery" parent="PagedAction" lazy-init="true" class="org.apache.oodt.cas.workflow.server.action.PagedQuery">
		<property name="description" value="Performs a paged query on workflow task instance jobs"/>
	</bean>
	<bean id="ChangeWorkflowState" lazy-init="true" class="org.apache.oodt.cas.workflow.server.action.ChangeWorkflowState">
		<property name="description" value="Changes a workflow's state"/>
	</bean>
	<bean id="ChangeWorkflowPriority" lazy-init="true" class="org.apache.oodt.cas.workflow.server.action.ChangeWorkflowPriority">
		<property name="description" value="Changes a workflow's priority"/>
	</bean>
	<bean id="PrintSupportedEvents" lazy-init="true" class="org.apache.oodt.cas.workflow.server.action.PrintSupportedEvents">
		<property name="description" value="Prints the events registered with server engine"/>
	</bean>
	<bean id="StartWorkflow" lazy-init="true" class="org.apache.oodt.cas.workflow.server.action.StartWorkflow">
		<property name="description" value="Starts a workflow"/>
	</bean>
	<bean id="MultiStartWorkflowByDate" lazy-init="true" class="org.apache.oodt.cas.workflow.server.action.MultiStartWorkflowByDate">
		<property name="description" value="Starts a workflow over a date range"/>
		<property name="dateFormat" value="yyyy-MM-dd"/>
		<property name="incrementMinutes" value="1440"/>
		<property name="dateMetadataKeys">
			<list>
				<value>NominalDate</value>
				<value>AllProductTypes/NominalDate/Term</value>
			</list>
		</property>
	</bean>
	<bean id="Shutdown" lazy-init="true" class="org.apache.oodt.cas.workflow.server.action.Shutdown">
		<property name="description" value="Shuts down the Workflow Engine Server"/>
	</bean>
	<bean id="PauseRunner" lazy-init="true" class="org.apache.oodt.cas.workflow.server.action.PauseRunner">
		<property name="description" value="Pauses the job submission runner thread"/>
	</bean>
	<bean id="ResumeRunner" lazy-init="true" class="org.apache.oodt.cas.workflow.server.action.ResumeRunner">
		<property name="description" value="Resumes the job submission runner thread"/>
	</bean>
	
</beans>

